var potterCharacterRepository=function(){var e=[],a="http://hp-api.herokuapp.com/api/characters/";function t(a){e.push(a)}function r(){var e=getDocWidth(),a=Math.round(.42*e),t=Math.round(list.getBoundingClientRect().left),r=setInterval(function(){t==a?clearInterval(r):t<=a-20?(t+=20,list.style.left=t+"px"):t<=a-10?(t+=10,list.style.left=t+"px"):t<=a-5?(t+=5,list.style.left=t+"px"):(t++,list.style.left=t+"px")},1)}return $(window).on("keydown",e=>{"Escape"===e.key&&r()}),{add:t,getAll:function(){return e},addListItem:function(e){var a=$('<li class="list-group-item" id="'+e.name.toLowerCase().replace(/\s/g,"")+'"></li>'),t=$('<button class="btn btn-primary" data-toggle="modal" data-target="#'+e.name.toLowerCase().replace(/\s/g,"")+'1">'+e.name+"</button>");$(a).append(t),$(potterCharacterList).append(a),function(e,a){$(e).on("click",function(){var e,t;!function(e){var a=$('<div class="modal fade" id="'+e.name.toLowerCase().replace(/\s/g,"")+'1" tabindex="-1" role="dialog" aria-labelledby="'+e.name+'" aria-hidden="true"></div>');a.on("click",e=>{var t=e.target;t.id===a[0].id&&r()});var t=$('<div class="modal-dialog" role="document"></div>'),s=$('<div class="modal-content"></div>'),n=$('<div class="modal-header"></div>');$(a).append(t),$(t).append(s),$(s).append(n);var o=$('<h5 class="modal-title" id="'+e.name+'">'+e.name+"</h5>"),l=$('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>');l.on("click",r),$(n).append(o),$(n).append(l);var i=$('<div class="modal-body"></div>'),d=$('<div class="modal-body-text-div"></div>'),c=$('<table class="species-table"></table>');$(d).append(c);var p=c[0].createTHead();$(p).addClass("species-header");var g=p.insertRow(0);$(g).text("Species");var b=c[0].insertRow(1).insertCell(0);$(b).text(e.species.charAt(0).toUpperCase()+e.species.slice(1));var u=$('<table class="patronus-table"></table>');$(d).append(u);var h=u[0].createTHead();$(h).addClass("patronus-header");var v=h.insertRow(0);$(v).text("Patronus");var m=u[0].insertRow(1).insertCell(0);$(m).text(e.patronus.charAt(0).toUpperCase()+e.patronus.slice(1)),""===e.patronus&&$(m).text("Unknown");var y='<div class="sr-only">'+e.name+" is a "+e.species+" and ";"female"===e.gender?y+="her ":y+="his ",""===e.patronus?y+="patronus animal is unknown.</div>":y+="patronus animal is a "+e.patronus+".</div>",y=$(y),$(d).append(y);var f=$('<div class="modal-table-div"></div>')[0],w=$('<table class="wand-table"></table>')[0];$(f).append(w);var C=w.createTHead();$(C).addClass("wand-header");var k=C.insertRow(0),R="Wand Unknown",L='<div class="sr-only">'+e.name+"'s ";if(e.wand.wood>""){R="Wand";var x=w.insertRow(1),U=x.insertCell(0);$(U).text("Wood: "),$(x).addClass("wand-table");var I=x.insertCell(1),W=e.wand.wood.charAt(0).toUpperCase()+e.wand.wood.slice(1);$(I).text(W),L+="wand is made of "+W;var M=w.insertRow(2),A=M.insertCell(0);$(A).text("Core: "),$(M).addClass("wand-table");var B=M.insertCell(1),H=e.wand.core.charAt(0).toUpperCase()+e.wand.core.slice(1);""===H?(H="Unknown",L+=", has a unknown core"):L+=", has a core of "+H,$(B).text(H);var S=w.insertRow(3),z=S.insertCell(0);$(z).text("Length: "),$(S).addClass("wand-table");var T=S.insertCell(1),j=e.wand.length+" in";" in"===j?(j="Unknown",L+=", and an unknown length.</div>"):L+=", and a length of "+j+".</div>",$(T).text(j)}else L=L.substring(0,L.length-3)+" has no wand or it's unknown.</div>";$(k).text(R),L=$(L),$(f).append(L);var E=$('<img class="character-picture" src="'+e.imageUrl+'">'),D=$('<div class="sr-only">Image of '+e.name+"</div>"),P=$('<div class="modal-image-div"></div>');$(P).append(E),$(P).append(D),$(i).append(P),$(i).append(d),$(i).append(f),$(s).append(i);var G=$('<div class="modal-footer"></div>'),q=$('<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>');switch($(q).on("click",r),$(G).append(q),$(s).append(G),e.house){case"Gryffindor":n[0].style.borderLeft="1rem solid rgb(127,9,9)",n[0].style.borderRight="1rem solid rgb(127,9,9)",n[0].style.background="rgba(127,9,9,.2)",i[0].style.borderLeft="1rem solid rgb(255,197,0)",i[0].style.borderRight="1rem solid rgb(255,197,0)",i[0].style.background="rgba(255,197,0,.2)";break;case"Slytherin":n[0].style.borderLeft="1rem solid rgb(13,98,23)",n[0].style.borderRight="1rem solid rgb(13,98,23)",n[0].style.background="rgba(13,98,23,.2)",i[0].style.borderLeft="1rem solid rgb(170,170,170)",i[0].style.borderRight="1rem solid rgb(170,170,170)",i[0].style.background="rgba(170,170,170,.2)";break;case"Hufflepuff":n[0].style.borderLeft="1rem solid rgb(238,225,23)",n[0].style.borderRight="1rem solid rgb(238,225,23)",n[0].style.background="rgba(238,225,23,.2)",i[0].style.borderLeft="1rem solid rgb(0,0,0)",i[0].style.borderRight="1rem solid rgb(0,0,0)",i[0].style.background="rgba(0,0,0,.2)";break;case"Ravenclaw":n[0].style.borderLeft="1rem solid rgb(0,10,144)",n[0].style.borderRight="1rem solid rgb(0,10,144)",n[0].style.background="rgba(0,10,144,.2)",i[0].style.borderLeft="1rem solid rgb(148,107,45)",i[0].style.borderRight="1rem solid rgb(148,107,45)",i[0].style.background="rgba(148,107,45,.2)"}$("body").append(a)}(a),e=list.getBoundingClientRect().left,t=setInterval(function(){e<100?clearInterval(t):(e-=20,list.style.left=e+"px")},1)})}(t,e)},loadList:function(){return $.ajax(a,{dataType:"json"}).then(function(e){e.forEach(function(e){t({name:e.name,imageUrl:e.image,species:e.species,wand:e.wand,patronus:e.patronus,house:e.house,gender:e.gender})})}).catch(function(e){console.error(e)})}}}(),potterCharacterList=$(".list-group");potterCharacterRepository.loadList().then(()=>{potterCharacterRepository.getAll().forEach(e=>{potterCharacterRepository.addListItem(e)}),$(potterCharacterLoadingMessage).remove(),backgroundResizer()});var navBar=$('<nav class="navbar navbar-dark"><h1 class="potter-title">Harry Potter Index<h1><form class="form-inline"><input id="search" class="form-control mr-sm-2" type="search" placeholder="Search..." aria-label="Search"></form></nav>');$("body").prepend(navBar);var potterCharacterLoadingMessage=$('<p class="loading-message">Loading...</p>');$(navBar).append(potterCharacterLoadingMessage),$("#search").keyup(filterList);var list=$("#list")[0];function filterList(){var e=$("#search")[0].value.toUpperCase();$.each(potterCharacterRepository.getAll(),(a,t)=>{var r=t.name.substring(0,e.length).toUpperCase(),s=t.name.toUpperCase().split(" ");s[0]=s[0].substring(0,e.length),s[1]=s[1].substring(0,e.length),e===r||e===s[0]||e===s[1]?$("#"+t.name.toLowerCase().replace(/\s/g,""))[0].style.display="":$("#"+t.name.toLowerCase().replace(/\s/g,""))[0].style.display="none"})}function listMover(){var e=window.innerWidth||$("body")[0].clientWidth;$("#modal-container").hasClass("is-visible")?list.style.left="100 px":list.style.left=.42*e+"px"}function getDocWidth(){return window.innerWidth||$("body")[0].clientWidth}function backgroundResizer(){var e=list.getBoundingClientRect().height+$("html")[0].getBoundingClientRect().height;$("body")[0].style.backgroundSize="auto "+e+"px"}listMover(),$(window).on("resize",listMover),$("body")[0].style.backgroundImage="url(img/hogwarts-express-painting-27.jpg)",$("body")[0].style.backgroundRepeat="no-repeat";